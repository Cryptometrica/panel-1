!function(t){t.fn.date=function(){return this.each(function(){if(t(this).data("pikaday"))return t(this);var a=t(this).attr("type","text"),r=a.next(),n=a.data("format"),e=a.val(),i=e?moment(e).format(n):null;a.attr("placeholder",n),a.val(i),a.on("change",function(){var t=a.val();t?r.val(moment(t,n).format("YYYY-MM-DD")):r.val("")});var o=new Pikaday({field:this,firstDay:1,format:n,i18n:a.data("i18n"),onSelect:function(t){r.val(moment(t).format("YYYY-MM-DD"))}});t(this).data("pikaday",o)})}}(jQuery),function(t){var a=function(a){var a=t(a),r=a.data("style"),n=a.data("api"),e=a.data("sortable"),i="table"==r?a.find(".structure-table tbody"):a.find(".structure-entries");return 0==e?!1:void i.sortable({helper:function(a,r){return r.children().each(function(){t(this).width(t(this).width())}),r.addClass("structure-sortable-helper")},update:function(){var a=[];t.each(t(this).sortable("toArray"),function(t,r){a.push(r.replace("structure-entry-",""))}),t.post(n,{ids:a},function(){app.content.reload()})}})};t.fn.structure=function(){return this.each(function(){if(t(this).data("structure"))return t(this);var r=new a(this);return t(this).data("structure",r),t(this)})}}(jQuery),function(t){t.fn.editor=function(){return this.each(function(){if(t(this).data("editor"))return t(this);var a=t(this),r=a.parent().find(".field-buttons");a.autosize(),r.find(".btn").on("click.editorButton",function(r){a.focus();var n=t(this);if(n.data("action"))app.modal.open(n.data("action"),window.location.href);else{var e=a.getSelection(),i=n.data("tpl"),o=n.data("text");e.length>0&&(o=e);var u=i.replace("{text}",o);a.insertAtCursor(u),a.trigger("autosize.resize")}return!1}),r.find("[data-editor-shortcut]").each(function(r,n){var e=t(this).data("editor-shortcut");a.bind("keydown",e,function(a){return t(n).trigger("click"),!1})}),a.data("editor",!0)})}}(jQuery);